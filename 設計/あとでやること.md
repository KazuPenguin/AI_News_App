# ã‚ã¨ã§ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆ

é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã¨æœ¬ç•ªé‹ç”¨ãƒ•ã‚§ãƒ¼ã‚ºã§å®Ÿæ–½ã™ã¹ãã‚¿ã‚¹ã‚¯ã‚’æ•´ç†ã—ã¾ã—ãŸã€‚

---

## ğŸš€ ä»Šã™ãã‚„ã‚‹ (é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã§å¿…è¦ãªã‚¿ã‚¹ã‚¯)

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“ã®é–‹ç™ºã‚’é€²ã‚ã‚‹ãŸã‚ã«ã€**ä»Šã™ãç€æ‰‹ãƒ»è§£æ±ºã™ã¹ã**é …ç›®ã§ã™ã€‚

### DatabaseStack é–¢é€£
- [x] **pgvector æ‹¡å¼µã®æœ‰åŠ¹åŒ–** â€” `20260219_001_initial_schema.py` ã§å¯¾å¿œ
  ```sql
  -- Alembic Migrationå†…ã§å®Ÿè¡Œæ¸ˆ
  CREATE EXTENSION IF NOT EXISTS vector;
  ```
- [x] **åˆæœŸã‚¹ã‚­ãƒ¼ãƒæŠ•å…¥** â€” `database_schema.md` ã®ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã‚’åæ˜ 
  - Alembic ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆæ¸ˆ (`20260219_001_initial_schema.py`)
- [x] **ã‚¢ãƒ³ã‚«ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸæŠ•å…¥** â€” `pgvector.md` Â§3 ã® 6 ã‚«ãƒ†ã‚´ãƒªåˆ†
  - æŠ•å…¥ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆæ¸ˆ (`backend/scripts/setup_anchors.py`)

### Secrets Manager (Batch/Auth é–‹ç™ºç”¨)
é–‹ç™ºã«å¿…è¦ãªå¤–éƒ¨APIã‚­ãƒ¼ã‚„èªè¨¼æƒ…å ±ã‚’ç™»éŒ²ã—ã¾ã™ã€‚
- [ ] **OpenAI API Key** ã‚’ Secrets Manager ã«ç™»éŒ²
  - `aws secretsmanager create-secret --name ai-research/openai-api-key --secret-string '{"api_key":"sk-xxx"}'`
- [ ] **Google AI Studio Key** ã‚’ Secrets Manager ã«ç™»éŒ²
  - `aws secretsmanager create-secret --name ai-research/gemini-api-key --secret-string '{"api_key":"xxx"}'`
- [ ] **Google OAuth ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ID / Secret** (æœªå–å¾—ãªã‚‰å–å¾—) â†’ Secrets Manager ã«ç™»éŒ²
- [ ] **Apple Sign In ã® Service ID / Key** (æœªå–å¾—ãªã‚‰å–å¾—) â†’ Secrets Manager ã«ç™»éŒ²

### CI/CD (Phase 1: è¶³å ´å›ºã‚)
- [x] **Frontend**: `package.json` ã« `lint` (ESLint/Prettier) ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ 
- [x] **Frontend**: `package.json` ã« `test` (Jest/Vitest) ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ 
- [x] **Frontend**: `package.json` ã« `type-check` (tsc) ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ 
- [x] **Frontend**: `.github/workflows/frontend.yml` ã§ä¸Šè¨˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ä¿®æ­£

---

## â³ å¾Œã§ã‚„ã‚‹ (æœ¬ç•ªé‹ç”¨ãƒ»ãƒªãƒªãƒ¼ã‚¹å‰ã®ã‚¿ã‚¹ã‚¯)

æ©Ÿèƒ½é–‹ç™ºãŒå®Œäº†ã—ã€æœ¬ç•ªç’°å¢ƒã¸ã®ç§»è¡Œã‚„ã‚¹ãƒˆã‚¢å…¬é–‹ã®æº–å‚™æ®µéšã§å®Ÿæ–½ã™ã‚‹é …ç›®ã§ã™ã€‚

### æœ¬ç•ªç’°å¢ƒã¸ã®ç§»è¡Œæ™‚ï¼ˆCDK è¨­å®šå¤‰æ›´ï¼‰
- [ ] **`database-stack.ts`**: `removalPolicy` ã‚’ `cdk.RemovalPolicy.RETAIN` ã«å¤‰æ›´ï¼ˆDB å‰Šé™¤é˜²æ­¢ï¼‰
- [ ] **`database-stack.ts`**: `multiAz` ã‚’ `true` ã«å¤‰æ›´ï¼ˆé«˜å¯ç”¨æ€§ï¼‰
- [ ] **`database-stack.ts`**: `deletionProtection` ã‚’ `true` ã«å¤‰æ›´
- [ ] **`database-stack.ts`**: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’ `db.t4g.small` ä»¥ä¸Šã«å¤‰æ›´
- [ ] **`network-stack.ts`**: `natGateways` ã‚’ `2` ã«å¤‰æ›´ï¼ˆAZ å†—é•·åŒ–ï¼‰
- [ ] **`api-stack.ts`**: CORS `allowOrigins` ã‚’ `ALL_ORIGINS` ã‹ã‚‰æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã«åˆ¶é™
- [ ] **`api-stack.ts`**: `dataTraceEnabled` ãŒ `false` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®ãƒ­ã‚°ç„¡åŠ¹åŒ–ï¼‰
- [ ] **`auth-stack.ts`**: ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚’ Cognito ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‹ã‚‰ **SES** ã«åˆ‡ã‚Šæ›¿ãˆï¼ˆé€ä¿¡åˆ¶é™ã®ç·©å’Œï¼‰
- [ ] **`auth-stack.ts`**: `callbackUrls` / `logoutUrls` ã‚’æ­£å¼ãªã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚­ãƒ¼ãƒ ã«æ›´æ–°ï¼ˆ`myapp://` â†’ æ­£å¼å€¤ï¼‰

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
- [ ] **VPC Endpoints ã®è¿½åŠ æ¤œè¨** â€” NAT Gateway çµŒç”±ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›
- [ ] **CloudFront ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š** â€” `cdn.example.com` ç­‰ï¼ˆACM è¨¼æ˜æ›¸ã®å–å¾—å«ã‚€ï¼‰
- [ ] **API Gateway ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š** â€” `api.example.com`ï¼ˆRoute 53 + ACM è¨¼æ˜æ›¸ï¼‰
- [ ] **WAF ã®è¿½åŠ æ¤œè¨** â€” CloudFront / API Gateway ã¸ã® Web ACL è¨­å®š

### AuthStack (ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³æœ‰åŠ¹åŒ–)
Secrets Manager ã«ç™»éŒ²ã—ãŸã‚­ãƒ¼ã‚’ä½¿ã£ã¦ CDK ã®è¨­å®šã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚
- [ ] **Google ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ã®æœ‰åŠ¹åŒ–** â€” `auth-stack.ts` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆè§£é™¤
- [ ] **Apple ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ã®æœ‰åŠ¹åŒ–** â€” `auth-stack.ts` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆè§£é™¤

### CI/CD (Phase 2 & 3: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨)
- [ ] **Frontend (Web)**: `infra` ã« Hosting ç”¨ã‚¹ã‚¿ãƒƒã‚¯ (S3 + CloudFront) ã‚’è¿½åŠ 
- [ ] **Frontend (Web)**: GitHub Actions ã« Build & Deploy ã‚¸ãƒ§ãƒ–ã‚’è¿½åŠ 
- [ ] **Frontend (Mobile)**: EAS (Expo Application Services) ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–ã¨ CI é€£æº
- [ ] **E2E ãƒ†ã‚¹ãƒˆ**: Playwright ç­‰ã‚’ç”¨ã„ãŸçµ±åˆãƒ†ã‚¹ãƒˆã®å°å…¥
- [ ] **ç›£è¦–/ã‚¢ãƒ©ãƒ¼ãƒˆ**: ç•°å¸¸æ¤œçŸ¥æ™‚ã®é€šçŸ¥è¨­å®š

### ãã®ä»–ã®é‹ç”¨èª²é¡Œ
- [ ] **Lambda ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ã®æ¤œè¨** â€” DockerImageFunction ã¸ã®ç§»è¡Œæ¤œè¨
- [ ] **DLQ (Dead Letter Queue) ã®è¿½åŠ ** â€” ãƒãƒƒãƒå¤±æ•—æ™‚ã®é€šçŸ¥ãƒ»ãƒªãƒˆãƒ©ã‚¤ç”¨
- [ ] **API ã‚­ãƒ¼ã®è¿½åŠ æ¤œè¨** â€” Usage Plan ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªå˜ä½ã®ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°

---

## âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®æ¤œè¨¼ï¼ˆæœ€çµ‚ç¢ºèªï¼‰
- [ ] pgvector æ‹¡å¼µã®æœ‰åŠ¹åŒ–ç¢ºèª (`SELECT * FROM pg_extension;`)
- [ ] EventBridge ãƒ«ãƒ¼ãƒ«ã®æ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] Cognito ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ç¢ºèª
- [ ] API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç–é€šç¢ºèªï¼ˆ`/health` ã§ 200 å¿œç­”ï¼‰
- [ ] ãƒãƒƒãƒ Lambda ã®æ‰‹å‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆï¼ˆ`aws lambda invoke`ï¼‰
